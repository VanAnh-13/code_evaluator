{% extends "base.html" %}

{% block title %}C++ Code Analyzer - Upload{% endblock %}

{% block content %}
<div class="chat-container">
    <div class="chat-header">
        <h2>C++ Code Analyzer</h2>
        <p>Upload your C++ file for AI-powered code analysis and improvement recommendations</p>
    </div>
    
    <div class="chat-messages">
        <div class="message system">
            <div class="message-content">
                <p>Welcome to the C++ Code Analyzer! I can help you analyze your C++ code for:</p>
                <ul>
                    <li>Potential bugs and logical errors</li>
                    <li>Memory management issues</li>
                    <li>Security vulnerabilities</li>
                    <li>Performance issues</li>
                    <li>Code style and readability</li>
                </ul>
                <p>Upload a C++ file (.cpp, .cc, .cxx, .h, .hpp) to get started.</p>
            </div>
        </div>
    </div>
    
    <div class="chat-input">
        <form action="{{ url_for('upload_file') }}" method="post" enctype="multipart/form-data" class="upload-form">
            <div class="file-input-container">
                <input type="file" name="file" id="file-input" class="file-input" accept=".cpp,.cc,.cxx,.h,.hpp">
                <label for="file-input" class="file-input-label">
                    <i class="fas fa-upload"></i>
                    <span id="file-name">Choose a C++ file</span>
                </label>
            </div>
            <button type="submit" class="submit-button">
                <i class="fas fa-paper-plane"></i>
                Analyze
            </button>
        </form>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
    // Update file name when file is selected
    document.getElementById('file-input').addEventListener('change', function() {
        const fileName = this.files[0] ? this.files[0].name : 'Choose a C++ file';
        document.getElementById('file-name').textContent = fileName;
    });
</script>
{% endblock %}